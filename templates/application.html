<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="/static/style.css">
        <link rel="icon" href="{{ url_for('static', path='favicon.ico') }}">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <title>交流戦 bot Webサービス</title>
    </head>
    <body style="background-color: #212121" class="text-light">
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-dark bg-dark border-bottom box-shadow mb-3">
            <div class="container">
                <h3 id="headerTitle">交流戦 Bot Webサービス</h3>
                <row>
                    <ul class="navbar-nav flex-grow">
                        <li class="nav-item">
                            <a href="/" class="nav-link text-light">Top</a>
                        </li>
                        </li>
                        <li class="nav-item">
                            <a href="/info" class="nav-link text-light">お知らせ</a>
                        </li>
                    </ul>
                </row>
            </div>
        </nav>
        {% block body %}
        {% endblock %}
        <script src="{{ url_for('static', path='index.js') }}"></script>

        <script type="text/javascript">
            function redirect() {
                const param = window.location.href.split('/');
                const prevId = param[param.length-1].replace("?","");
                const guildId = document.getElementById('guildId').value;
                console.log(prevId, guildId);
                if (prevId==guildId) {
                    alert("同じサーバーです");
                    return;
                }
                console.log(guildId);
                const url = `/api/guild/results/${guildId}`
                fetch(url)
                    .then(response => {
                        if (response.ok) {
                            window.location.reload(`/guild/details/${guildId}`);
                        } else {
                            alert("戦績が存在しません");
                        }
                    })
    }
        </script>
    </body>
</html>
